{% block map_dependencies %}
  {% if config is defined and config['server']['use_local_map_deps']|lower|trim == 'true' %}
  {# Local vendor-based importmap #}
  <script type="importmap">
    {
      "imports": {
        "ol/": "/js/vendor/ol/",
        "ol-ext/": "/js/vendor/ol-ext/",
        "rbush": "/js/vendor/rbush.js",
        "quickselect": "/js/vendor/quickselect.js",
        "earcut": "https://cdn.jsdelivr.net/npm/earcut@3.0.1/src/earcut.js",
        "color-space/": "/js/vendor/color-space/",
        "color-rgba": "/js/vendor/color-rgba.js",
        "color-parse": "/js/vendor/color-parse.js"
      }
    }
  </script>
  <link href="/js/vendor/ol/ol.css" rel="stylesheet">
  <link href="/js/vendor/ol-ext/ol-ext.css" rel="stylesheet">
  {% else %}
  {# CDN-based importmap #}
  <script type="importmap">
    {
      "imports": {
        "ol/": "https://cdn.jsdelivr.net/npm/ol@10.5.0/",
        "ol-ext/": "https://cdn.jsdelivr.net/npm/ol-ext@4.0.0/",
        "rbush": "https://cdn.jsdelivr.net/npm/rbush@3.0.1/index.js",
        "quickselect": "https://cdn.jsdelivr.net/npm/quickselect@3.0.0/index.min.js",
        "earcut": "https://cdn.jsdelivr.net/npm/earcut@3.0.1/src/earcut.js",
        "color-space/": "https://cdn.jsdelivr.net/npm/color-space@2.3.2/",
        "color-rgba": "https://cdn.jsdelivr.net/npm/color-rgba@3.0.0/index.min.js",
        "color-parse": "https://cdn.jsdelivr.net/npm/color-parse@2.0.2/index.min.js"
      }
    }
  </script>
  <link href="https://cdn.jsdelivr.net/npm/ol@10.5.0/ol.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/ol-ext@4.0.0/ol-ext.css" rel="stylesheet">
  {% endif %}
{% endblock %} 